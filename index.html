<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Black Jack</title>
    <link rel="stylesheet" type="text/css" href="main.css" />
  </head>
  <body>
    <div id="wrapper">
      <div>
        <div id="message">Press Start Button</div>
        <div id="start">
          <button id="btnStart" type="button" onclick="Start()">Start</button>
        </div>
      </div>
      <div id="context">
        Dealer Hand:
        <div id="dealerHolder"></div>
        Player Hand:
        <div id="playerHolder"></div>
      </div>
    </div>

    <script>
      let wrapper = document.querySelector("#wrapper");
      let output = document.querySelector("#context");

      let cards = [];
      let playerCard = [];
      let dealerCard = [];
      let cardCount = 0;
      let dealerHolder = document.querySelector("#dealerHolder");
      let playerHolder = document.querySelector("#playerHolder");
      let randomNumber = Math.floor(Math.random() * 52);
      let suits = ["spades", "clubs", "hearts", "diams"];
      let numb = [
        "A",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        "10",
        "J",
        "Q",
        "K"
      ];

      suits.forEach(s => {
        let suit = s[0].toUpperCase();
        let bgcolor = suit == "S" || suit == "C" ? "black" : "red";
        numb.forEach(n => {
          let cardValue =
            n === "A" ? 1 : n == "J" || n == "Q" || n == "K" ? 10 : parseInt(n);

          let card = {
            suit: suit,
            icon: s,
            bgcolor: bgcolor,
            cardnum: n,
            cardvalue: cardValue
          };
          cards.push(card);
        });
      });

      function Start() {
        shuffleDeck(cards);
        dealNew();
      }

      function dealNew() {
        playerCard = [];
        dealerCard = [];
        dealerHolder.innerHTML = "";
        playerHolder.innerHTML = "";
        for (x = 0; x < 2; x++) {
          dealerCard.push(cards[cardCount]);
          dealerHolder.innerHTML += cardOutput(cardCount, x);
          cardCount++;
          playerCard.push(cards[cardCount]);
          playerHolder.innerHTML += cardOutput(cardCount, x);
          cardCount++;
        }
      }

      function cardOutput(num, x) {
        let hpos = x > 0 ? x * 60 + 110 : 100;
        return (
          '<div class="icard ' +
          cards[num].icon +
          '" style="left:' +
          hpos +
          'px;"><div class="top-card suit">' +
          cards[num].cardnum +
          '<br></div><div class="content-card suit"></div><div class="bottom-card suit">' +
          cards[num].cardnum +
          "<br></div></div>"
        );
      }

      function shuffleDeck(array) {
        for (let i = array.length - 1; i > 0; i--) {
          let j = Math.floor(Math.random() * (i + 1));
          let temp = array[i];
          array[i] = array[j];
          array[j] = temp;
        }
        return array;
      }
    </script>
  </body>
</html>
